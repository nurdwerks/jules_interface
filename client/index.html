<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jules Interface</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="markdown.css">
    <!-- Using a simple font stack that mimics the look -->
</head>
<body>
    <div id="app-shell">
        <aside id="sidebar">
            <div class="sidebar-top">
                <div class="sidebar-header">
                    <span class="logo-text">jules</span>
                    <button class="sidebar-toggle" title="Toggle Sidebar">‚ó´</button>
                </div>
                <div class="sidebar-search">
                    <input type="text" placeholder="Search for repo or sessions">
                    <span class="search-icon">üîç</span>
                </div>
            </div>

            <div class="sidebar-content scrollable-content">
                <!-- Recent Sessions -->
                <div class="sidebar-section expanded">
                    <div class="section-header">
                        <span>Recent sessions</span>
                        <span class="chevron">^</span>
                    </div>
                    <!-- Filters -->
                    <div class="sidebar-controls">
                         <select id="filter-source"><option value="ALL">All Sources</option></select>
                         <label class="filter-label"><input type="checkbox" id="filter-recent" checked> Recent (<24h)</label>
                         <!-- <select id="filter-status"><option value="ALL">All Status</option></select> -->
                         <!-- <select id="sort-order"><option value="newest">Newest</option></select> -->
                    </div>

                    <div id="session-list-sidebar">
                        <!-- Populated by app.js -->
                    </div>

                    <button id="nav-create" class="sidebar-action-btn">
                        <span class="icon">+</span> View more / Create
                    </button>
                </div>

                <!-- Codebases (Mock) -->
                <div class="sidebar-section expanded">
                    <div class="section-header">
                        <span>Codebases</span>
                        <span class="chevron">^</span>
                    </div>
                    <div class="sidebar-list">
                        <div class="sidebar-item"><span class="repo-icon">GitHub</span> nurdwerks/a-counter</div>
                        <div class="sidebar-item"><span class="repo-icon">GitHub</span> nurdwerks/curly-waffle</div>
                        <div class="sidebar-item"><span class="repo-icon">GitHub</span> nurdwerks/jules_interface</div>
                        <div class="sidebar-item"><span class="repo-icon">GitHub</span> nurdwerks/nurdchess</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="usage-limit">
                    <div class="limit-bar">
                         <div class="limit-fill" style="width: 31%;"></div>
                    </div>
                    <span class="limit-text">Daily session limit (31/100)</span>
                </div>
                <div class="footer-icons">
                    <button class="icon-btn" title="Docs">üìÑ Docs</button>
                    <button class="icon-btn" title="Discord">üí¨</button>
                    <button class="icon-btn" title="X">ùïè</button>
                </div>
            </div>
        </aside>

        <main id="editor-area">
            <!-- Global Views Container -->
            <div class="content-container">

                <!-- Placeholder for "List" view if needed, but sidebar acts as list.
                     We keep #view-list for logic compatibility but can make it overlap or just show welcome.
                -->
                <section id="view-list" class="view">
                    <div class="welcome-container">
                        <h1>Welcome to Jules</h1>
                        <p>Select a session to start.</p>
                    </div>
                </section>

                <section id="view-create" class="view hidden">
                    <div class="view-header"><h2>Create New Session</h2></div>
                    <form id="create-session-form" class="scrollable-content container-centered">
                         <div class="form-group">
                            <label for="prompt">Prompt</label>
                            <textarea id="prompt" required placeholder="Describe what you want to build..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="source">Source</label>
                            <select id="source" required></select>
                        </div>
                        <div class="form-group">
                            <label for="branch">Starting Branch</label>
                            <input type="text" id="branch" value="main" required>
                        </div>
                        <button type="submit" class="primary-btn">Create Session</button>
                        <button type="button" id="back-to-list" class="secondary-btn">Cancel</button>
                    </form>
                </section>

                <section id="view-details" class="view hidden">
                    <!-- Session Header -->
                    <header class="session-header">
                        <h2 id="session-title">Session Name</h2>
                        <div class="header-actions">
                             <button id="refresh-session-btn" class="icon-btn" title="Refresh">‚Üª</button>
                             <div class="header-tabs">
                                 <button class="tab active">Session</button>
                                 <button class="tab">PR</button>
                             </div>
                        </div>
                    </header>

                    <div class="split-view">
                        <!-- Chat / Interaction Panel -->
                        <div class="panel-chat">
                            <div id="activities-container" class="scrollable-content">
                                <!-- Chat bubbles go here -->
                            </div>

                            <div class="chat-input-area">
                                <div class="input-wrapper">
                                    <textarea id="message-input" placeholder="Talk to Jules"></textarea>
                                    <button id="send-message-btn" class="send-btn">+</button>
                                </div>
                                <div class="chat-hint">
                                    Jules can make mistakes so double-check it and use code with caution
                                </div>
                            </div>

                            <!-- Hidden controls preserved for functionality if needed, or moved to UI -->
                            <div class="actions hidden">
                                <button id="approve-plan-btn">Approve Plan</button>
                            </div>
                        </div>

                        <!-- Code / Info Panel -->
                        <div class="panel-code">
                            <div class="code-header">
                                <div class="file-tabs">
                                    <div class="file-tab active">app.js</div>
                                    <div class="file-tab">style.css</div>
                                </div>
                                <div class="code-actions">
                                    <button class="secondary-btn">Download zip</button>
                                </div>
                            </div>
                            <div class="code-content scrollable-content">
                                <!-- Reusing session-info here for now -->
                                <div id="session-info" class="info-card"></div>

                                <div class="code-placeholder">
                                    <pre style="color: #ccc;">
// Select a file to view code
// (Mock visualization)
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Authentication Required</h2>
            <p>Please enter your credentials.</p>
            <input type="text" id="username-input" placeholder="Username" class="modal-input">
            <input type="password" id="password-input" placeholder="Password" class="modal-input">
            <button id="login-btn" class="primary-btn full-width">Login</button>
            <div id="login-error" class="error-msg"></div>
        </div>
    </div>

    <div id="json-modal" class="modal hidden">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Raw Activity Data</h2>
                <button class="close-modal-btn">√ó</button>
            </div>
            <div class="modal-body">
                <pre id="json-content"></pre>
            </div>
        </div>
    </div>

    <script src="marked.js"></script>
    <script src="app.js"></script>
    <script src="app_modal.js"></script>
</body>
</html>
